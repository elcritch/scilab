{
	"preprocessors": {
		"cycles": {
			"function": " {'tr':data.raw.load_missus, 'lg': data.raw.load_1kN }[details.info.orientation] " 
		}
	},
	"processors": {
		"tracking": [
			{
				"name":"raw",
				"columns": [
		            { 
						"info": { "name": "step", "label": "Step", "units": "Nº",  "full": "Step"                                       }
					},
		            { 
						"info": { "name": "totalTime", "label": "Total Time", "units": "s",   "full": "Total Time (s)"                             }
					},
		            { 
						"info": { "name": "disp", "label": "Displacement", "units": "mm", "full": "Displacement(Linear|Digital Position) (mm)" }
					},
		            { 
						"info": { "name": "load_1kN", "label": "Load (1kN)", "units": "N", "full": "Load(Linear|Load) (N)"                      }
					},
		            { 
						"info": { "name": "load_missus", "label": "Load (Missus)", "units": "N",   "full": "Load(Linear|Load1) (N)"                     }
					},
		            { 
						"info": { "name": "elapsedCycles", "label": "Elapsed Cycles", "units": "Nº",  "full": "Elapsed Cycles"                             }
					},
		            { 
						"info": { "name": "cycleElapsedTime", "label": "Cycle Elapsed Time ", "units": "s",   "full": "Cycle Elapsed Time (s)"                     }
					},
		            { 
						"info": { "name": "totalCycleCount", "label": "Total Cycle Count", "units": "Nº",  "full": "Total Cycle Count(Linear Waveform)"         
							}}
				],
				"_slicecolumns_": ["step"]
			},
			{
				"name":"normalize",
				"columns": [
					{
						"info":     { "name":  "totalTime", "units": "s", "label": "Total Time" },
						"source":     { "column": "data.raw.totalTime" }, 
						"conversion": {}
					},
					{ 
						"info":     { "name":  "elapsedCycles", "units": "Nº:Cycles/Step", "label": "Elapsed Cycles" },
						"source":     { "column": "data.raw.elapsedCycles" }, 
						"conversion": {}
					},
					{
						"info":     { "name":  "totalCycleCount", "units": "Nº:Cycles/Test", "label": "Total Cycle Count" },
						"source":     { "column": "data.raw.totalCycleCount" }, 
						"conversion": {}
					},
					{
						"info":     { "name":  "cycleElapsedTime", "units": "s", "label": "Elapsed Cycles" },
						"source":     { "column": "data.raw.cycleElapsedTime" }, 
						"conversion": {}
					},
					{
						"info":     { "name":     "strain", "units": "∆", "label": "Strain" }, 
						"source":     { "column":   "data.raw.disp"},
						"conversion": { "constant": "1.0/details.gauge.value" }
					},
					{
						"info":     { "name":     "stress", "units": "MPa", "label": "Stress" },
						"source":     { "function": " {'tr':data.raw.load_missus, 'lg': data.raw.load_1kN }[details.info.orientation] " },
						"conversion": { "constant": "1.0/details.measurements.area.value" }
					},
					{
						"info":     { "name":     "step", "units": "", "label": "WaveMatrix Step" },
						"source":     { "column":    "data.raw.step" }, 
						"conversion": { "constant": "1.0/details.measurements.area.value" }
					}
				],
				"_slicecolumns_": ["step"]
			}
		],
		"trends": [
			{
				"details": {"kind": "instron", "mode": "trends", "filetype": "csv" }
			},
			{
				"raw": [
		            { "name": "step",                   "label": "Step",                    "units": "Nº",  "full": "Step"                                       },
		            { "name": "totalTime",              "label": "Total Time",              "units": "s",   "full": "Total Time (s)"                             },
		            { "name": "disp",                   "label": "Displacement",            "units": "mm",  "full": "Displacement(Linear|Digital Position) (mm)" },
		            { "name": "load_1kN",               "label": "Load (1kN)",              "units": "N",   "full": "Load(Linear|Load) (N)"                      },
		            { "name": "load_missus",            "label": "Load (Missus)",           "units": "N",   "full": "Load(Linear|Load1) (N)"                     },
		            { "name": "elapsedCycles",          "label": "Elapsed Cycles",          "units": "Nº",  "full": "Elapsed Cycles"                             },
		            { "name": "cycleElapsedTime",       "label": "Cycle Elapsed Time ",     "units": "s",   "full": "Cycle Elapsed Time (s)"                     },
		            { "name": "totalCycleCount",        "label": "Total Cycle Count",       "units": "Nº",  "full": "Total Cycle Count(Linear Waveform)"         }
				]
			},
			{
				"normalize": [
					{
						"column":     { "name":  "totalTime", "units": "s", "label": "Total Time" },
						"source":     { "column": "data.raw.totalTime" }, 
						"conversion": {}
					},
					{ 
						"column":     { "name":  "elapsedCycles", "units": "Nº:Cycles/Step", "label": "Elapsed Cycles" },
						"source":     { "column": "data.raw.elapsedCycles" }, 
						"conversion": {}
					},
					{
						"column":     { "name":  "totalCycleCount", "units": "Nº:Cycles/Test", "label": "Total Cycle Count" },
						"source":     { "column": "data.raw.totalCycleCount" }, 
						"conversion": {}
					},
					{
						"column":     { "name":  "cycleElapsedTime", "units": "s", "label": "Elapsed Cycles" },
						"source":     { "column": "data.raw.cycleElapsedTime" }, 
						"conversion": {}
					},
					{
						"column":     { "name":     "strain", "units": "∆", "label": "Strain" }, 
						"source":     { "column":   "data.raw.disp"},
						"conversion": { "constant": "1.0/details.gauge.value" }
					},
					{
						"column":     { "name":     "stress", "units": "MPa", "label": "Stress" },
						"source":     { "function": " {'tr':data.raw.load_missus, 'lg': data.raw.load_1kN }[details.info.orientation] " },
						"conversion": { "constant": "1.0/details.measurements.area.value" }
					},
					{
						"column":     { "name":     "step", "units": "", "label": "WaveMatrix Step" },
						"source":     { "column":    "data.raw.step" }, 
						"conversion": { "constant": "1.0/details.measurements.area.value" }
					}
				]
			}
		]
	},
	"methods": [
 		{
 			"preload": [
 				{
					"name": "tracking",
 					"processor": { "$ref": "#/processors/tracking"},
 					"files": { "_csv_": "raw/01 Preloads/*.tracking.csv" }					
 				}
 			]
 		},
		{
			"precond": [
				{
					"name": "tracking",
					"processor": { "$ref": "#/processors/tracking"},
					"files": { "_csv_": "raw/02 Preconditions/*.tracking.csv" }
				}
			]
		},
		{
			"cycles": [
				{
					"name": "tracking",
					"preprocessor": { "$ref": "#/preprocessors/cycles"},
					"processor": { "$ref": "#/processors/tracking"},
					"files": {
						"_csv_": {
							"_lookup_": { 
								"details.info.orientation": {
									"tr": "raw/03 Fatigue Cycles (TR)/*.tracking.csv",
									"lg": "raw/03 Fatigue Cycles (LG)/*.tracking.csv"
								}
							}
						}
					}
				}
			]
		}
	]
}
